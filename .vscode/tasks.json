{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "00. (Win) Remove vcpkg folders",
      "type": "shell",
      "command": "rmdir /s /q vcpkg vcpkg_installed",
    },
    {
      "label": "01. (Win) Remove build folder",
      "type": "shell",
      "command": "rmdir /s /q build",
    },
    {
      "label": "02. (Win) Git submodule update",
      "type": "shell",
      "command": "git submodule update --init --recursive"
    },
    {
      "label": "03. (Win) Install vcpkg as subfolder",
      "type": "shell",
      "command": "git clone https://github.com/microsoft/vcpkg && .\\vcpkg\\bootstrap-vcpkg.bat && .\\vcpkg\\vcpkg install --triplet=x64-Windows"
    },
    {
      "label": "05. ********* Clean console *********",
      "type": "shell",
      "command": "cls",
    },
    {
      "label": "10. (WinDebug) + Configure",
      "type": "shell",
      "command": "cmake -S . -B build/debug -DCMAKE_BUILD_TYPE=Debug -G \"Ninja\" -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
      "dependsOn": [
        "05. ********* Clean console *********"
      ]
    },
    {
      "label": "20. (WinDebug) + Build",
      "type": "shell",
      "command": "cmake --build build/debug -- -k 0", // stop on first error
      // "command": "cmake --build build/debug", // continue on error
      "dependsOn": [
        "10. (WinDebug) + Configure"
      ]
    },
    {
      "label": "30. (WinDebug) + Copy config.json",
      "type": "shell",
      "command": "cmake -E copy config.json build/debug/src/config.json",
      "dependsOn": [
        "20. (WinDebug) + Build"
      ]
    },
    {
      "label": "40. (WinDebug) + Copy assets",
      "type": "shell",
      "command": "cmake -E copy_directory thirdparty/game_assets/wofares/assets build/debug/src/assets",
      "dependsOn": [
        "30. (WinDebug) + Copy config.json"
      ]
    },
    {
      "label": "50. (WinDebug) + Run",
      "type": "shell",
      "command": "${workspaceFolder}/build/debug/src/wofares.exe",
      "dependsOn": [
        "40. (WinDebug) + Copy assets"
      ]
    },
    {
      "label": "55. (WinDebug) Run",
      "type": "shell",
      "command": "${workspaceFolder}/build/debug/src/wofares.exe"
    },
    {
      "label": "57. (WinDebug) Pack",
      "type": "shell",
      "command": "python scripts/pack_binaries.py \"C:\\Program Files\\7-Zip\\7z.exe\" ${workspaceFolder} debug wofares_debug"
    },
    {
      "label": "60. ********* Clean console *********",
      "type": "shell",
      "command": "cls",
    },
    {
      "label": "65. (WinRelease) + Configure",
      "type": "shell",
      "command": "cmake -S . -B build/release -DCMAKE_BUILD_TYPE=Release -G \"Ninja\" -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
      "dependsOn": [
        "60. ********* Clean console *********"
      ]
    },
    {
      "label": "70. (WinRelease) + Build",
      "type": "shell",
      "command": "cmake --build build/release -- -k 0", // stop on first error
      // "command": "cmake --build build/release", // continue on error
      "dependsOn": [
        "65. (WinRelease) + Configure"
      ]
    },
    {
      "label": "75. (WinRelease) + Copy config.json",
      "type": "shell",
      "command": "cmake -E copy config.json build/release/src/config.json",
      "dependsOn": [
        "70. (WinRelease) + Build"
      ]
    },
    {
      "label": "80. (WinRelease) + Copy assets",
      "type": "shell",
      "command": "cmake -E copy_directory thirdparty/game_assets/wofares/assets build/release/src/assets",
      "dependsOn": [
        "75. (WinRelease) + Copy config.json"
      ]
    },
    {
      "label": "85. (WinRelease) + Run",
      "type": "shell",
      "command": "${workspaceFolder}/build/release/src/wofares.exe",
      "dependsOn": [
        "80. (WinRelease) + Copy assets"
      ]
    },
    {
      "label": "90. (WinRelease) Run",
      "type": "shell",
      "command": "${workspaceFolder}/build/release/src/wofares.exe"
    },
    {
      "label": "95. (WinRelease) Pack",
      "type": "shell",
      "command": "python scripts/pack_binaries.py \"C:\\Program Files\\7-Zip\\7z.exe\" ${workspaceFolder} release wofares_release"
    }
  ]
}