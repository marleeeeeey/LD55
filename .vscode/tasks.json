{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "000. CONFIG: WIN_RELEASE",
            "command": "cls",
            "options": {
                "statusbar": {
                    "hide": false,
                    "label": "000. CONFIG: WIN_RELEASE"
                }
            },
            "type": "shell"
        },
        {
            "label": "002. Remove vcpkg folders",
            "command": "rmdir /s /q vcpkg vcpkg_installed 2>nul & exit 0",
            "type": "shell"
        },
        {
            "label": "003. Remove build folder",
            "command": "rmdir /s /q build 2>nul & exit 0",
            "type": "shell"
        },
        {
            "label": "005. Git submodule update",
            "command": "git submodule update --init --recursive",
            "type": "shell"
        },
        {
            "label": "007. Install vcpkg as subfolder",
            "command": " git clone https://github.com/microsoft/vcpkg && .\\vcpkg\\bootstrap-vcpkg.bat && .\\vcpkg\\vcpkg install --triplet=x64-Windows",
            "type": "shell"
        },
        {
            "label": "010. (+) Configure",
            "command": [
                " cmake -S . -B build/Release -DCMAKE_BUILD_TYPE=Release -GNinja -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake   -DCMAKE_EXPORT_COMPILE_COMMANDS=ON"
            ],
            "options": {
                "statusbar": {
                    "hide": false,
                    "label": "Configure"
                }
            },
            "type": "shell"
        },
        {
            "label": "020. (+) Build",
            "command": " cmake --build build/Release -- -k 0",
            "dependsOn": [
                "010. (+) Configure"
            ],
            "options": {
                "statusbar": {
                    "hide": false,
                    "label": "Build"
                }
            },
            "type": "shell"
        },
        {
            "label": "060. + Pack",
            "command": "python scripts/pack_binaries.py \"C:\\Program Files\\7-Zip\\7z.exe\" ${workspaceFolder} build/Release LD55_Hungry_Portals_Release desktop",
            "dependsOn": [
                "040. + Copy assets"
            ],
            "options": {
                "statusbar": {
                    "hide": false,
                    "label": "Pack"
                }
            },
            "type": "shell"
        },
        {
            "label": "030. + Copy config.json",
            "command": "cmake -E copy config.json build/Release/src/config.json",
            "dependsOn": [
                "020. (+) Build"
            ],
            "type": "shell"
        },
        {
            "label": "040. + Copy assets",
            "command": "cmake -E copy_directory assets build/Release/src/assets",
            "dependsOn": [
                "030. + Copy config.json"
            ],
            "type": "shell"
        },
        {
            "label": "050. + Run",
            "command": "${workspaceFolder}/build/Release/src/LD55_Hungry_Portals.exe",
            "dependsOn": [
                "040. + Copy assets"
            ],
            "options": {
                "statusbar": {
                    "hide": false,
                    "label": "Run"
                }
            },
            "type": "shell"
        },
        {
            "label": "070. Run",
            "command": "${workspaceFolder}/build/debug/src/LD55_Hungry_Portals.exe",
            "type": "shell"
        }
    ]
}